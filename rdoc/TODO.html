<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

  <title>File: TODO [VCLog]</title>

  <link rel="SHORTCUT ICON" href="./images/file.png">

  <link type="text/css" media="screen" rel="stylesheet" href="./rdoc.css" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>
</head>

<body class="file">

  <div class="head">
    <h1>
      <img src="./images/file.png" align="absmiddle">&nbsp;
      <a href="./index.html">VCLog</a>&nbsp;
      <a href="/">TODO</a>
    </h1>
  </div>

  <div id="metadata">
    <div id="project-metadata">

      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./HISTORY_md.html">HISTORY.md</a></li>
        
          <li class="file"><a href="./LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./README.html">README</a></li>
        
          <li class="file"><a href="./TODO.html">TODO</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li class="module"><a href="./VCLog.html">VCLog</a></li>
        
          <li class="class"><a href="./VCLog/Changelog.html">VCLog::Changelog</a></li>
        
          <li class="class"><a href="./VCLog/Changelog/Entry.html">VCLog::Changelog::Entry</a></li>
        
          <li class="class"><a href="./VCLog/VCS.html">VCLog::VCS</a></li>
        
          <li class="class"><a href="./VCLog/VCS/DARCS.html">VCLog::VCS::DARCS</a></li>
        
          <li class="class"><a href="./VCLog/VCS/GIT.html">VCLog::VCS::GIT</a></li>
        
          <li class="class"><a href="./VCLog/VCS/SVN.html">VCLog::VCS::SVN</a></li>
        
          <li class="module"><a href="./Syckle.html">Syckle</a></li>
        
          <li class="module"><a href="./Syckle/Plugins.html">Syckle::Plugins</a></li>
        
          <li class="class"><a href="./Syckle/Plugins/VClog.html">Syckle::Plugins::VClog</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>

    <div id="validator-badges">
      Generated with <a href="http://github.com/proutils/rdazzle">Razzle Dazzle Redfish</a><br/><br/>
      <a href="http://validator.w3.org/check/referer">[Validate]</a>
    </div>
  </div>

  <div id="documentation">
    <h1><a href="TODO.html">TODO</a></h1>
<h2>Typed option needs work</h2>
<p>
It produced no results sometimes. Fix or deprecate.
</p>
<h2>Automagical Version</h2>
<p>
Would be cool if it could also generate an automagical version number.
</p>
<h3>For Git</h3>
<p>
We started off by looking at what git can tell us about the current
release:
</p>
<pre>
    * git-rev-parse &lt;id&gt; tells up what the ID of the &lt;id&gt; is, we can find out the current commit's ID by using HEAD (or nothing at all)
    * git-rev-list &lt;id&gt;..HEAD tells us what the commits were between the &lt;id&gt; and the current commit
    * git-describe &lt;id&gt; shows us, in a nice format, a unique description of the commit.
</pre>
<p>
Using all of this together Patrick came up with:
</p>
<pre>
    BRANCH=`git-describe | awk -F'-g[0-9a-fA-F]+' '{print $1}'`
    COMMIT=`git-rev-parse HEAD | awk '{print substr($1,0,8)}'`
    INCREMENT=`git-rev-list $BRANCH..HEAD | wc -l | awk '{print $1}'`
    TGZ=&quot;openswan-$BRANCH-($INCREMENT)-g$COMMIT.tgz&quot;
</pre>
<p>
What this attempts to achieve is create a tar ball name that describes the
release using the last tag, the number of builds since the tag was made,
and the short commit ID. Here is the breakdown of the bits:
</p>
<pre>
    * BRANCH will tell us what major release this is a part of,
    * INCREMENT is a pseudo build number (it's really the number of commits since the last release), and
    * g*COMMIT* is the short ID of the commit that generated the build.
</pre>

  </div>

</body>


</html>
